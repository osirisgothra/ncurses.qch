Content-type: text/html; charset=UTF-8

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Man page of terminfo</TITLE>
</HEAD><BODY>
<H1>terminfo</H1>
Section: Misc. Reference Manual Pages (3NCURSES)<BR>Updated: <BR><A HREF="#index">Index</A>
<A HREF="/cgi-bin/man/man2html">Return to Main Contents</A><HR>











<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

<B>del_curterm</B>,
<B>mvcur</B>,
<B>putp</B>,
<B>restartterm</B>,
<B>set_curterm</B>,
<B>setterm</B>,
<B>setupterm</B>,
<B>tigetflag</B>,
<B>tigetnum</B>,
<B>tigetstr</B>,
<B>tiparm</B>,
<B>tparm</B>,
<B>tputs</B>,
<B>vid_attr</B>,
<B>vid_puts</B>,
<B>vidattr</B>,
<B>vidputs</B> - <B>curses</B> interfaces to terminfo database


<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<PRE>
<B>#include &lt;<A HREF="file:///usr/include/curses.h">curses.h</A>&gt;</B>
<BR>
<B>#include &lt;<A HREF="file:///usr/include/term.h">term.h</A>&gt;</B>

<B>int setupterm(char *</B><I>term</I><B>, int </B><I>fildes</I><B>, int *</B><I>errret</I><B>);</B>
<BR>
<B>int setterm(char *</B><I>term</I><B>);</B>
<BR>
<B>TERMINAL *set_curterm(TERMINAL *</B><I>nterm</I><B>);</B>
<BR>
<B>int del_curterm(TERMINAL *</B><I>oterm</I><B>);</B>
<BR>
<B>int restartterm(char *</B><I>term</I><B>, int </B><I>fildes</I><B>, int *</B><I>errret</I><B>);</B>
<BR>
<B>char *tparm(char *</B><I>str</I><B>, ...);</B>
<BR>
<B>int tputs(const char *</B><I>str</I><B>, int </B><I>affcnt</I><B>, int (*</B><I>putc</I><B>)(int));</B>
<BR>
<B>int putp(const char *</B><I>str</I><B>);</B>
<BR>
<B>int vidputs(chtype </B><I>attrs</I><B>, int (*</B><I>putc</I><B>)(int));</B>
<BR>
<B>int vidattr(chtype </B><I>attrs</I><B>);</B>
<BR>
<B>int vid_puts(attr_t </B><I>attrs</I><B>, short </B><I>pair</I><B>, void *</B><I>opts</I><B>, int (*</B><I>putc</I><B>)(int));</B>
<BR>
<B>int vid_attr(attr_t </B><I>attrs</I><B>, short </B><I>pair</I><B>, void *</B><I>opts</I><B>);</B>
<BR>
<B>int mvcur(int </B><I>oldrow</I><B>, int </B><I>oldcol</I><B>, int </B><I>newrow</I>, int <I>newcol</I><B>);</B>
<BR>
<B>int tigetflag(char *</B><I>capname</I><B>);</B>
<BR>
<B>int tigetnum(char *</B><I>capname</I><B>);</B>
<BR>
<B>char *tigetstr(char *</B><I>capname</I><B>);</B>
<BR>
<B>char *tiparm(const char *</B><I>str</I><B>, ...);</B>
<BR>
</PRE>

<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

These low-level routines must be called by programs that have to deal
directly with the <B>terminfo</B> database to handle certain terminal
capabilities, such as programming function keys.  For all other
functionality, <B>curses</B> routines are more suitable and their use is
recommended.
<A NAME="lbAE">&nbsp;</A>
<H3>Initialization</H3>

<P>

Initially, <B>setupterm</B> should be called.  Note that
<B>setupterm</B> is automatically called by <B>initscr</B> and
<B>newterm</B>.  This defines the set of terminal-dependent variables
[listed in <B><A HREF="/cgi-bin/man/man2html?5+terminfo">terminfo</A></B>(5)].
<P>

Each initialization routine provides applications with the
terminal capabilities either directly (via header definitions),
or by special functions.
The header files <B>curses.h</B> and <B>term.h</B> should be included (in this
order) to get the definitions for these strings, numbers, and flags.
<P>

The <B>terminfo</B> variables
<B>lines</B> and <B>columns</B> are initialized by <B>setupterm</B> as
follows:

<DL COMPACT>
<DT>&bull;<DD>

If <B>use_env(FALSE)</B> has been called, values for
<B>lines</B> and <B>columns</B> specified in <B>terminfo</B> are used.

<DT>&bull;<DD>

Otherwise, if the environment variables <B>LINES</B> and <B>COLUMNS</B>
exist, their values are used.  If these environment variables do not
exist and the program is running in a window, the current window size
is used.  Otherwise, if the environment variables do not exist, the
values for <B>lines</B> and <B>columns</B> specified in the
<B>terminfo</B> database are used.
</DL>
<P>

Parameterized strings should be passed through <B>tparm</B> to instantiate them. 
All <B>terminfo</B> strings [including the output of <B>tparm</B>] should be printed
with <B>tputs</B> or <B>putp</B>.
Call <B>reset_shell_mode</B> to restore the
tty modes before exiting [see <B>kernel</B>(3NCURSES)].
<P>

Programs which use
cursor addressing should

<DL COMPACT>
<DT>&bull;<DD>

output <B>enter_ca_mode</B> upon startup and

<DT>&bull;<DD>

output <B>exit_ca_mode</B> before exiting.
</DL>
<P>

Programs which execute shell subprocesses should

<DL COMPACT>
<DT>&bull;<DD>

call <B>reset_shell_mode</B> and
output <B>exit_ca_mode</B> before the shell
is called and

<DT>&bull;<DD>

output <B>enter_ca_mode</B> and
call <B>reset_prog_mode</B> after returning from the shell.
</DL>
<P>

The <B>setupterm</B> routine reads in the <B>terminfo</B> database,
initializing the <B>terminfo</B> structures, but does not set up the
output virtualization structures used by <B>curses</B>.  The terminal
type is the character string <I>term</I>; if <I>term</I> is null, the
environment variable <B>TERM</B> is used.
All output is to file descriptor <B>fildes</B> which is initialized for output.
If <I>errret</I> is not null,
then <B>setupterm</B> returns <B>OK</B> or
<B>ERR</B> and stores a status value in the integer pointed to by
<I>errret</I>.
A return value of <B>OK</B> combined with status of <B>1</B> in <I>errret</I>
is normal.
If <B>ERR</B> is returned, examine <I>errret</I>:
<DL COMPACT>
<DT><B>1</B>

<DD>
means that the terminal is hardcopy, cannot be used for curses applications.
<DT><DD>
<B>setupterm</B> determines if the entry is a hardcopy type by
checking the <I>hc</I> (<I>hardcopy</I>) capability.
<DT><B>0</B>

<DD>
means that the terminal could not be found,
or that it is a generic type,
having too little information for curses applications to run.
<DT><DD>
<B>setupterm</B> determines if the entry is a generic type by
checking the <I>gn</I> (<I>generic</I>) capability.
<DT><B>-1</B>

<DD>
means that the <B>terminfo</B> database could not be found.
</DL>
<P>

If <I>errret</I> is
null, <B>setupterm</B> prints an error message upon finding an error
and exits.  Thus, the simplest call is:
<P>
<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>setupterm((char&nbsp;*)0,&nbsp;1,&nbsp;(int&nbsp;*)0);</B>,
<P>
which uses all the defaults and sends the output to <B>stdout</B>.
<P>

The <B>setterm</B> routine was replaced by <B>setupterm</B>.  The call:
<P>
<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>setupterm(</B><I>term</I><B>,&nbsp;1,&nbsp;(int&nbsp;*)0)</B>
<P>
provides the same functionality as <B>setterm(</B><I>term</I><B>)</B>.
The <B>setterm</B> routine is provided for BSD compatibility, and
is not recommended for new programs.

<A NAME="lbAF">&nbsp;</A>
<H3>The Terminal State</H3>

<P>

The <B>setupterm</B> routine stores its information about the terminal
in a <B>TERMINAL</B> structure pointed to by the global variable <B>cur_term</B>.
If it detects an error,
or decides that the terminal is unsuitable (hardcopy or generic),
it discards this information,
making it not available to applications.
<P>

If <B>setupterm</B> is called repeatedly for the same terminal type,
it will reuse the information.
It maintains only one copy of a given terminal's capabilities in memory.
If it is called for different terminal types,
<B>setupterm</B> allocates new storage for each set of terminal capabilities.
<P>

The <B>set_curterm</B> routine sets <B>cur_term</B> to
<I>nterm</I>, and makes all of the <B>terminfo</B> boolean, numeric, and
string variables use the values from <I>nterm</I>.
It returns the old value of <B>cur_term</B>.
<P>

The <B>del_curterm</B> routine frees the space pointed to by
<I>oterm</I> and makes it available for further use.  If <I>oterm</I> is
the same as <B>cur_term</B>, references to any of the <B>terminfo</B>
boolean, numeric, and string variables thereafter may refer to invalid
memory locations until another <B>setupterm</B> has been called.
<P>

The <B>restartterm</B> routine is similar to <B>setupterm</B> and <B>initscr</B>,
except that it is called after restoring memory to a previous state (for
example, when reloading a game saved as a core image dump).
<B>restartterm</B> assumes that the windows and the input and output options
are the same as when memory was saved,
but the terminal type and baud rate may be different.
Accordingly, <B>restartterm</B> saves various tty state bits,
calls <B>setupterm</B>, and then restores the bits.

<A NAME="lbAG">&nbsp;</A>
<H3>Formatting Output</H3>

<P>

The <B>tparm</B> routine instantiates the string <I>str</I> with
parameters <I>pi</I>.  A pointer is returned to the result of <I>str</I>
with the parameters applied.
<P>

<B>tiparm</B> is a newer form of <B>tparm</B> which uses <I>&lt;<A HREF="file:///usr/include/stdarg.h">stdarg.h</A>&gt;</I>
rather than a fixed-parameter list.
Its numeric parameters are integers (int) rather than longs.

<A NAME="lbAH">&nbsp;</A>
<H3>Output Functions</H3>

<P>

The <B>tputs</B> routine applies padding information to the string
<I>str</I> and outputs it.  The <I>str</I> must be a terminfo string
variable or the return value from <B>tparm</B>, <B>tgetstr</B>, or
<B>tgoto</B>.  <I>affcnt</I> is the number of lines affected, or 1 if
not applicable.  <I>putc</I> is a <B>putchar</B>-like routine to which
the characters are passed, one at a time.
<P>

The <B>putp</B> routine calls <B>tputs(</B><I>str</I><B>, 1, putchar)</B>.
Note that the output of <B>putp</B> always goes to <B>stdout</B>, not to
the <I>fildes</I> specified in <B>setupterm</B>.
<P>

The <B>vidputs</B> routine displays the string on the terminal in the
video attribute mode <I>attrs</I>, which is any combination of the
attributes listed in <B>ncurses</B>(3NCURSES).  The characters are passed to
the <B>putchar</B>-like routine <I>putc</I>.
<P>

The <B>vidattr</B> routine is like the <B>vidputs</B> routine, except
that it outputs through <B>putchar</B>.
<P>

The <B>vid_attr</B> and <B>vid_puts</B> routines correspond to vidattr and vidputs,
respectively.
They use a set of arguments for representing the video attributes plus color,
i.e.,
one of type attr_t for the attributes and one of short for
the color_pair number.
The <B>vid_attr</B> and <B>vid_puts</B> routines
are designed to use the attribute constants with the <I>WA_</I> prefix.
The opts argument is reserved for future use.
Currently, applications must provide a null pointer for that argument.
<P>

The <B>mvcur</B> routine provides low-level cursor motion.  It takes
effect immediately (rather than at the next refresh).

<A NAME="lbAI">&nbsp;</A>
<H3>Terminal Capability Functions</H3>

<P>

The <B>tigetflag</B>, <B>tigetnum</B> and <B>tigetstr</B> routines return
the value of the capability corresponding to the <B>terminfo</B>
<I>capname</I> passed to them, such as <B>xenl</B>.
The <I>capname</I> for each capability is given in the table column entitled
<I>capname</I> code in the capabilities section of <B><A HREF="/cgi-bin/man/man2html?5+terminfo">terminfo</A></B>(5).
<P>

These routines return special values to denote errors.
<P>

The <B>tigetflag</B> routine returns
<DL COMPACT>
<DT><B>-1</B><DD>
if <I>capname</I> is not a boolean capability,
or
<DT><B>0</B><DD>
if it is canceled or absent from the terminal description.
</DL>
<P>

The <B>tigetnum</B> routine returns
<DL COMPACT>
<DT><B>-2</B><DD>
if <I>capname</I> is not a numeric capability, or
<DT><B>-1</B><DD>
if it is canceled or absent from the terminal description.
</DL>
<P>

The <B>tigetstr</B> routine returns
<DL COMPACT>
<DT><B>(char *)-1</B><DD>
if <I>capname</I> is not a string capability,
or
<DT><B>0</B><DD>
if it is canceled or absent from the terminal description.

</DL>
<A NAME="lbAJ">&nbsp;</A>
<H3>Terminal Capability Names</H3>

These null-terminated arrays contain
the short terminfo names (&quot;codes&quot;),
the <B>termcap</B> names, and the long terminfo names (&quot;fnames&quot;)
for each of the predefined <B>terminfo</B> variables:
<DL COMPACT><DT><DD>
<B>char *boolnames[]</B>, <B>*boolcodes[]</B>, <B>*boolfnames[]</B>
<P>
<B>char *numnames[]</B>, <B>*numcodes[]</B>, <B>*numfnames[]</B>
<P>
<B>char *strnames[]</B>, <B>*strcodes[]</B>, <B>*strfnames[]</B>
</DL>

<A NAME="lbAK">&nbsp;</A>
<H2>RETURN VALUE</H2>

Routines that return an integer return <B>ERR</B> upon failure and <B>OK</B>
(SVr4 only specifies &quot;an integer value other than <B>ERR</B>&quot;) upon successful
completion, unless otherwise noted in the preceding routine descriptions.
<P>

Routines that return pointers always return <B>NULL</B> on error.
<P>

X/Open defines no error conditions.
In this implementation
<DL COMPACT><DT><DD>
<DL COMPACT>
<DT><B>del_curterm</B><DD>
returns an error
if its terminal parameter is null.
<DT><B>putp</B><DD>
calls <B>tputs</B>, returning the same error-codes.
<DT><B>restartterm</B><DD>
returns an error
if the associated call to <B>setupterm</B> returns an error.
<DT><B>setupterm</B><DD>
returns an error
if it cannot allocate enough memory, or
create the initial windows (stdscr, curscr, newscr).
Other error conditions are documented above.
<DT><B>tputs</B><DD>
returns an error if the string parameter is null.
It does not detect I/O errors:
X/Open states that <B>tputs</B> ignores the return value
of the output function <I>putc</I>.
</DL>
</DL>

<A NAME="lbAL">&nbsp;</A>
<H2>PORTABILITY</H2>

X/Open notes that <B>vidattr</B> and <B>vidputs</B> may be macros.
<P>

The function <B>setterm</B> is not described by X/Open and must
be considered non-portable.
All other functions are as described by X/Open.
<P>

<B>setupterm</B> copies the terminal name to the array <B>ttytype</B>.
This is not part of X/Open Curses, but is assumed by some applications.
<P>

If configured to use the terminal-driver,
e.g., for the MinGW port,

<DL COMPACT>
<DT>&bull;<DD>

<B>setupterm</B> interprets a missing/empty TERM variable as the
special value ``unknown''.

<DT>&bull;<DD>

<B>setupterm</B> allows explicit use of the
the windows console driver by checking if $TERM is set to
``#win32con'' or an abbreviation of that string.
</DL>
<P>

Older versions of <B>ncurses</B> assumed that the file descriptor passed to
<B>setupterm</B> from <B>initscr</B> or <B>newterm</B> uses buffered I/O,
and would write to the corresponding stream.
In addition to the limitation that the terminal was left in block-buffered
mode on exit (like SystemV curses),
it was problematic because <B>ncurses</B>
did not allow a reliable way to cleanup on receiving SIGTSTP.
The current version uses output buffers managed directly by <B>ncurses</B>.
Some of the low-level functions described in this manual page write
to the standard output.
They are not signal-safe.
The high-level functions in <B>ncurses</B> use
alternate versions of these functions
using the more reliable buffering scheme.
<P>

In System V Release 4, <B>set_curterm</B> has an <B>int</B> return type and
returns <B>OK</B> or <B>ERR</B>.  We have chosen to implement the X/Open Curses
semantics.
<P>

In System V Release 4, the third argument of <B>tputs</B> has the type
<B>int (*putc)(char)</B>.
<P>

At least one implementation of X/Open Curses (Solaris) returns a value
other than OK/ERR from <B>tputs</B>.
That returns the length of the string, and does no error-checking.
<P>

X/Open Curses prototypes <B>tparm</B> with a fixed number of parameters,
rather than a variable argument list.
This implementation uses a variable argument list, but can be
configured to use the fixed-parameter list.
Portable applications should provide 9 parameters after the format;
zeroes are fine for this purpose.
<P>

In response to comments by Thomas E. Dickey,
X/Open Curses Issue 7 proposed the <B>tiparm</B> function in mid-2009.
<P>

X/Open notes that after calling <B>mvcur</B>, the curses state may not match the
actual terminal state, and that an application should touch and refresh
the window before resuming normal curses calls.
Both <B>ncurses</B> and System V Release 4 curses implement <B>mvcur</B> using
the SCREEN data allocated in either <B>initscr</B> or <B>newterm</B>.
So though it is documented as a terminfo function,
<B>mvcur</B> is really a curses function which is not well specified.
<P>

X/Open states that the old location must be given for <B>mvcur</B>.
This implementation allows the caller to use -1's for the old ordinates.
In that case, the old location is unknown.
<P>

Other implementions may not declare the capability name arrays.
Some provide them without declaring them.
X/Open does not specify them.
<P>

Extended terminal capability names, e.g., as defined by <B>tic&nbsp;-x</B>,
are not stored in the arrays described here.
<A NAME="lbAM">&nbsp;</A>
<H2>SEE ALSO</H2>

<B>ncurses</B>(3NCURSES),
<B>initscr</B>(3NCURSES),
<B>kernel</B>(3NCURSES),
<B>termcap</B>(3NCURSES),
<B>curses_variables</B>(3NCURSES),
<B>terminfo_variables</B>(3NCURSES),
<B><A HREF="/cgi-bin/man/man2html?3+putc">putc</A></B>(3),
<B><A HREF="/cgi-bin/man/man2html?5+terminfo">terminfo</A></B>(5)
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DL>
<DT><A HREF="#lbAE">Initialization</A><DD>
<DT><A HREF="#lbAF">The Terminal State</A><DD>
<DT><A HREF="#lbAG">Formatting Output</A><DD>
<DT><A HREF="#lbAH">Output Functions</A><DD>
<DT><A HREF="#lbAI">Terminal Capability Functions</A><DD>
<DT><A HREF="#lbAJ">Terminal Capability Names</A><DD>
</DL>
<DT><A HREF="#lbAK">RETURN VALUE</A><DD>
<DT><A HREF="#lbAL">PORTABILITY</A><DD>
<DT><A HREF="#lbAM">SEE ALSO</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/cgi-bin/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 20:42:57 GMT, April 08, 2015
</BODY>
</HTML>
